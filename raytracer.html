<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.3.4/chai.min.js"
        integrity="sha512-gkZWobgJrQevN2HMEeTnSlxWPJ3HS0JJ3nXcgI6XLK/NI0z59jbztRZqbTlIzfl21vIGahQaeW0knwH1az/tbg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Raytracer</title>
</head>

<body>
    <canvas id="canvas"></canvas>

    <script>
        // ************************ TUPLE ***********************************************************
        const EPSILON = 0.00001;

        function equal(a, b) {
            return Math.abs(a - b) < EPSILON;
        }

        function tuple(x, y, z, w) {
            return { x, y, z, w };
        }

        function point(x, y, z) {
            return { x, y, z, w: 1 };
        }

        function vector(x, y, z) {
            return { x, y, z, w: 0 }
        }

        function add_tuple(a, b) {
            return { x: a.x + b.x, y: a.y + b.y, z: a.z + b.z, w: a.w + b.w };
        }

        function sub_tuple(a, b) {
            return { x: a.x - b.x, y: a.y - b.y, z: a.z - b.z, w: a.w - b.w };
        }
        function negate(t) {
            return { x: -t.x, y: -t.y, z: -t.z, w: -t.w };
        }
        function multiply_tuple(t, s) {
            return { x: t.x * s, y: t.y * s, z: t.z * s, w: t.w * s };
        }
        function divide_tuple(t, s) {
            return { x: t.x / s, y: t.y / s, z: t.z / s, w: t.w / s };
        }
        function magnitude(t) {
            return Math.sqrt(t.x * t.x + t.y * t.y + t.z * t.z + t.w * t.w);
        }
        function normalize(t) {
            const m = magnitude(t);
            return divide_tuple(t, m);
        }
        function dot(t, a) {
            return a.x * t.x + a.y * t.y + a.z * t.z + a.w * t.w;
        }
        function cross(t, b) {
            return vector(t.y * b.z - t.z * b.y,
                t.z * b.x - t.x * b.z,
                t.x * b.y - t.y * b.x);

        }
        function reflect(t, normal) {
            return sub_tuple(t, multiply_tuple(normal, 2 * dot(t, normal)));

        }

        /**********************************************************************************/
        /*                                     TEST                                       */
        /**********************************************************************************/
        {
            let a = tuple(4.3, -4.2, 3.1, 1.0);
            chai.assert.equal(a.x, 4.3);
            chai.assert.equal(a.y, -4.2);
            chai.assert.equal(a.z, 3.1);
            chai.assert.equal(a.w, 1.0);
            let p = point(4, -4, 3);
            chai.assert.deepEqual(p, tuple(4, -4, 3, 1));
            let v = vector(4, -4, 3);
            chai.assert.deepEqual(v, tuple(4, -4, 3, 0));
        }


    </script>

</body>

</html>
